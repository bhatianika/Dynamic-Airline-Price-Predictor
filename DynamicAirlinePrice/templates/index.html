<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airline Ticket Price Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- CDN Links for Dependencies -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    
    <div class="container">
        <header>
            <img src="{{ url_for('static', filename='images/plane.jpg') }}" alt="Airline Ticket Price Predictor Banner" width="100%" style="display: block; visibility: visible; opacity: 1;">
            <h2>Airline Ticket Price Predictor</h2>
        </header>
        <!-- Make sure the submit button is inside the form -->
        <form action="/predict" method="POST">
            <label for="days_left">Number of Days Left:</label>
            <input type="number" id="days_left" name="days_left" required min="1">
            
            <label for="seasonality">Seasonality (1 for Peak, 0 for Off-Peak):</label>
            <input type="number" id="seasonality" name="seasonality" required min="0" max="1">

            <label for="base_price">Base Price ($):</label>
            <input type="number" step="0.01" id="base_price" name="base_price" required>

            <button type="submit" class="predict-btn updated-btn">
                <i class="fas fa-rocket"></i> Predict
            </button>
        </form>

        <!-- Predicted price display -->
        {% if predicted_price %}
        <div class="result">
            <h3>Estimated Price: ${{ predicted_price }}</h3>
        </div>
        {% endif %}
    </div>

    <!-- CDN Links for JavaScript Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script>
        // Initialize Flatpickr for Departure Date
        flatpickr("#departureDate", {
            wrap: true,
            position: "auto",
            onChange: function(selectedDates, dateStr, instance) {
                const selectedDate = moment(dateStr);
                const today = moment();
                const daysLeft = selectedDate.diff(today, 'days');
                document.getElementById('days_left').value = daysLeft;
            },
            onDayCreate: function(dObj, dStr, fp, dayElem){
                // Add holiday highlighting if required
                if (dStr === '2024-12-25' || dStr === '2025-01-01') {
                    dayElem.classList.add("holiday");
                }
            }
        });
    </script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
